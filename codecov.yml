# Codecov Configuration for mistral.rs

coverage:
  precision: 2
  round: down
  range: "70...100"
  status:
    project:
      default:
        target: 70%
        threshold: 2%
        if_ci_failed: error
    patch:
      default:
        target: 80%
        threshold: 5%
        if_ci_failed: error

comment:
  layout: "reach,diff,flags,tree,footer"
  behavior: default
  require_changes: false
  require_base: false
  require_head: true

ignore:
  - "tests/**/*"
  - "benches/**/*"
  - "examples/**/*"
  - "**/tests/**/*"
  - "**/benches/**/*"
  - "**/*_test.rs"
  - "**/*_tests.rs"
  - "**/test_*.rs"

flag_management:
  default_rules:
    carryforward: true

flags:
  unit:
    paths:
      - "src/"
    carryforward: true
  integration:
    paths:
      - "tests/"
    carryforward: true

component_management:
  individual_components:
    - component_id: core
      name: mistralrs-core
      paths:
        - "mistralrs-core/**/*"
    - component_id: agent-tools
      name: mistralrs-agent-tools
      paths:
        - "mistralrs-agent-tools/**/*"
    - component_id: quant
      name: mistralrs-quant
      paths:
        - "mistralrs-quant/**/*"
    - component_id: vision
      name: mistralrs-vision
      paths:
        - "mistralrs-vision/**/*"
    - component_id: audio
      name: mistralrs-audio
      paths:
        - "mistralrs-audio/**/*"
    - component_id: server
      name: mistralrs-server
      paths:
        - "mistralrs-server/**/*"
    - component_id: mcp
      name: mistralrs-mcp
      paths:
        - "mistralrs-mcp/**/*"
    - component_id: tui
      name: mistralrs-tui
      paths:
        - "mistralrs-tui/**/*"
